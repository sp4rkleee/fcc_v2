<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRO: –ü—É—Ç—å –õ–µ–≥–µ–Ω–¥—ã</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
        }

        .status-bar {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .week-info {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 5px;
        }

        .auto-save {
            font-size: 12px;
            color: #4CAF50;
        }

        .player-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .player-name {
            font-size: 20px;
            font-weight: 600;
        }

        .player-club {
            font-size: 14px;
            opacity: 0.8;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }

        .stat-item {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 8px;
        }

        .stat-value {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.8;
        }

        .injury-warning {
            background: #ff4444;
            color: white;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            margin-bottom: 15px;
            font-size: 14px;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        .menu-button {
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 20px 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .menu-button:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
        }

        .menu-button:active {
            transform: translateY(0);
        }

        .button-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .button-text {
            font-size: 14px;
            font-weight: 500;
        }

        .calendar {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .calendar-header {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            text-align: center;
        }

        .calendar-grid {
            display: grid;
            gap: 8px;
        }

        .calendar-day {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            font-size: 14px;
        }

        .day-current {
            background: rgba(76, 175, 80, 0.3);
            border: 1px solid #4CAF50;
        }

        .training-options {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .training-header {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            text-align: center;
        }

        .training-grid {
            display: grid;
            gap: 10px;
        }

        .training-button {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .training-button:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .training-type {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .training-desc {
            font-size: 12px;
            opacity: 0.8;
        }

        .back-button {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            margin-top: 10px;
        }

        .hidden {
            display: none;
        }

        .progress-bar {
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            margin-top: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: #4CAF50;
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .energy-low {
            background: #ff4444;
        }

        .energy-medium {
            background: #ff9800;
        }

        .energy-high {
            background: #4CAF50;
        }

        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .notification.show {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
        <div id="mainMenu">
            <div class="status-bar">
                <div class="week-info">–ù–µ–¥–µ–ª—è: <span id="currentWeek">1</span> | –°–µ–∑–æ–Ω: <span id="currentSeason">2024</span></div>
                <div class="auto-save">–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ: ‚óè –ê–∫—Ç–∏–≤–Ω–æ</div>
            </div>

            <div class="player-card">
                <div class="player-header">
                    <div>
                        <div class="player-name" id="playerName">–ê–ª–µ–∫—Å–µ–π –ü–µ—Ç—Ä–æ–≤</div>
                        <div class="player-club" id="playerClub">–°–ö–ê –†–æ—Å—Ç–æ–≤</div>
                    </div>
                    <div class="player-age" id="playerAge">19 –ª–µ—Ç</div>
                </div>

                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="statForm">84%</div>
                        <div class="stat-label">–§–æ—Ä–º–∞</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="statMorale">76%</div>
                        <div class="stat-label">–ú–æ—Ä–∞–ª—å</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="statEnergy">65%</div>
                        <div class="stat-label">–≠–Ω–µ—Ä–≥–∏—è</div>
                        <div class="progress-bar">
                            <div class="progress-fill energy-medium" id="energyBar" style="width: 65%"></div>
                        </div>
                    </div>
                </div>

                <div id="injuryWarning" class="injury-warning hidden">
                    ‚ö†Ô∏è –¢–†–ê–í–ú–ê: –†–∞—Å—Ç—è–∂–µ–Ω–∏–µ —Å–≤—è–∑–æ–∫ - 7 –¥–Ω–µ–π
                </div>
            </div>

            <div class="menu-grid">
                <div class="menu-button" onclick="showScreen('status')">
                    <div class="button-icon">üìä</div>
                    <div class="button-text">–°—Ç–∞—Ç—É—Å</div>
                </div>
                <div class="menu-button" onclick="showScreen('calendar')">
                    <div class="button-icon">üìÖ</div>
                    <div class="button-text">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</div>
                </div>
                <div class="menu-button" onclick="showScreen('training')">
                    <div class="button-icon">üèãÔ∏è</div>
                    <div class="button-text">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>
                </div>
                <div class="menu-button" onclick="performAction('rest')">
                    <div class="button-icon">üí§</div>
                    <div class="button-text">–û—Ç–¥—ã—Ö</div>
                </div>
                <div class="menu-button" onclick="showScreen('life')">
                    <div class="button-icon">üéØ</div>
                    <div class="button-text">–ñ–∏–∑–Ω—å</div>
                </div>
                <div class="menu-button" onclick="showScreen('team')">
                    <div class="button-icon">üë•</div>
                    <div class="button-text">–ö–æ–º–∞–Ω–¥–∞</div>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Å—Ç–∞—Ç—É—Å–∞ -->
        <div id="statusScreen" class="hidden">
            <div class="player-card">
                <div class="player-header">
                    <div class="player-name" id="detailedPlayerName">–ê–ª–µ–∫—Å–µ–π –ü–µ—Ç—Ä–æ–≤</div>
                    <div class="player-age">19 –ª–µ—Ç</div>
                </div>

                <div style="margin-bottom: 20px;">
                    <div style="font-size: 16px; font-weight: 600; margin-bottom: 10px;">–û—Å–Ω–æ–≤–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã:</div>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="attrPhysical">82</div>
                            <div class="stat-label">–§–∏–∑. —Ñ–æ—Ä–º–∞</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="attrMental">78</div>
                            <div class="stat-label">–ú–µ–Ω—Ç–∞–ª–∏—Ç–µ—Ç</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="attrTechnique">85</div>
                            <div class="stat-label">–¢–µ—Ö–Ω–∏–∫–∞</div>
                        </div>
                    </div>
                </div>

                <div style="margin-bottom: 20px;">
                    <div style="font-size: 16px; font-weight: 600; margin-bottom: 10px;">–§–∏–Ω–∞–Ω—Å—ã:</div>
                    <div class="stat-item">
                        <div class="stat-value">‚Ç¨120,000</div>
                        <div class="stat-label">–ó–∞—Ä–ø–ª–∞—Ç–∞/–º–µ—Å</div>
                    </div>
                </div>

                <div>
                    <div style="font-size: 16px; font-weight: 600; margin-bottom: 10px;">–†–µ–ø—É—Ç–∞—Ü–∏—è:</div>
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px;">
                        <div style="margin-bottom: 8px;">–ë–æ–ª–µ–ª—å—â–∏–∫–∏: ‚ñ™‚ñ™‚ñ™‚ñ™‚óê (4.2/5)</div>
                        <div style="margin-bottom: 8px;">–†–∞–∑–¥–µ–≤–∞–ª–∫–∞: ‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™ (4.8/5)</div>
                        <div>–°–ú–ò: ‚ñ™‚ñ™‚ñ™‚ñ™‚óØ (4.0/5)</div>
                    </div>
                </div>
            </div>

            <div class="back-button" onclick="showScreen('main')">–ù–∞–∑–∞–¥</div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –∫–∞–ª–µ–Ω–¥–∞—Ä—è -->
        <div id="calendarScreen" class="hidden">
            <div class="calendar">
                <div class="calendar-header">–ö–∞–ª–µ–Ω–¥–∞—Ä—å | –ù–µ–¥–µ–ª—è <span id="calendarWeek">1</span></div>
                <div class="calendar-grid" id="calendarGrid">
                    <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                </div>
                <div style="margin-top: 15px; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 8px; text-align: center;">
                    ‚öΩ –°–ª–µ–¥—É—é—â–∏–π –º–∞—Ç—á: —á–µ—Ä–µ–∑ <span id="nextMatchDays">2</span> –¥–Ω–µ–π
                </div>
            </div>
            <div class="back-button" onclick="showScreen('main')">–ù–∞–∑–∞–¥</div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ -->
        <div id="trainingScreen" class="hidden">
            <div class="training-options">
                <div class="training-header">–í—ã–±–æ—Ä —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</div>
                <div class="training-grid">
                    <div class="training-button" onclick="performTraining('physical')">
                        <div class="training-type">üí™ –§–∏–∑. –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞</div>
                        <div class="training-desc">+2-3 –∫ –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç–∏, -15 —ç–Ω–µ—Ä–≥–∏–∏</div>
                    </div>
                    <div class="training-button" onclick="performTraining('technical')">
                        <div class="training-type">üîß –¢–µ—Ö–Ω–∏–∫–∞</div>
                        <div class="training-desc">+2-3 –∫ —Ç–µ—Ö–Ω–∏–∫–µ, -12 —ç–Ω–µ—Ä–≥–∏–∏</div>
                    </div>
                    <div class="training-button" onclick="performTraining('tactical')">
                        <div class="training-type">üß† –¢–∞–∫—Ç–∏–∫–∞</div>
                        <div class="training-desc">+1-2 –∫ —Ä–µ—à–µ–Ω–∏—é, -10 —ç–Ω–µ—Ä–≥–∏–∏</div>
                    </div>
                    <div class="training-button" onclick="performTraining('mental')">
                        <div class="training-type">üòå –ü—Å–∏—Ö–æ–ª–æ–≥–∏—è</div>
                        <div class="training-desc">+2-5 –∫ –º–æ—Ä–∞–ª–∏, -8 —ç–Ω–µ—Ä–≥–∏–∏</div>
                    </div>
                </div>
            </div>
            <div class="back-button" onclick="showScreen('main')">–ù–∞–∑–∞–¥</div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –∂–∏–∑–Ω–∏ -->
        <div id="lifeScreen" class="hidden">
            <div class="training-options">
                <div class="training-header">–ñ–∏–∑–Ω—å –≤–Ω–µ –ø–æ–ª—è</div>
                <div class="training-grid">
                    <div class="training-button" onclick="performAction('family')">
                        <div class="training-type">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ –°–µ–º—å—è</div>
                        <div class="training-desc">+5-10 –º–æ—Ä–∞–ª–∏, -5 —ç–Ω–µ—Ä–≥–∏–∏</div>
                    </div>
                    <div class="training-button" onclick="performAction('media')">
                        <div class="training-type">üì∫ –°–ú–ò</div>
                        <div class="training-desc">+0.1-0.3 —Ä–µ–ø—É—Ç–∞—Ü–∏–∏, -8 —ç–Ω–µ—Ä–≥–∏–∏</div>
                    </div>
                    <div class="training-button" onclick="performAction('social')">
                        <div class="training-type">üì± –°–æ—Ü—Å–µ—Ç–∏</div>
                        <div class="training-desc">+0.1-0.2 —Ä–µ–ø—É—Ç–∞—Ü–∏–∏, -6 —ç–Ω–µ—Ä–≥–∏–∏</div>
                    </div>
                    <div class="training-button" onclick="performAction('business')">
                        <div class="training-type">üíº –ë–∏–∑–Ω–µ—Å</div>
                        <div class="training-desc">–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –∏ –ø—Ä–∏–±—ã–ª—å</div>
                    </div>
                </div>
            </div>
            <div class="back-button" onclick="showScreen('main')">–ù–∞–∑–∞–¥</div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –∫–æ–º–∞–Ω–¥—ã -->
        <div id="teamScreen" class="hidden">
            <div class="player-card">
                <div style="font-size: 18px; font-weight: 600; margin-bottom: 15px; text-align: center;">
                    –ö–æ–º–∞–Ω–¥–∞: <span id="teamName">–°–ö–ê –†–æ—Å—Ç–æ–≤</span>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <div style="font-size: 14px; margin-bottom: 10px; opacity: 0.9;">–°–æ—Å—Ç–∞–≤ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</div>
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px;">
                        <div style="margin-bottom: 8px;">‚Ä¢ –í–∞—à–∞ –ø–æ–∑–∏—Ü–∏—è: –ê—Ç–∞–∫—É—é—â–∏–π –ø–æ–ª—É–∑–∞—â–∏—Ç–Ω–∏–∫</div>
                        <div style="margin-bottom: 8px;">‚Ä¢ –†–µ–ø—É—Ç–∞—Ü–∏—è –≤ —Ä–∞–∑–¥–µ–≤–∞–ª–∫–µ: 4.8/5</div>
                        <div style="margin-bottom: 8px;">‚Ä¢ –û—Ç–Ω–æ—à–µ–Ω–∏—è —Å —Ç—Ä–µ–Ω–µ—Ä–æ–º: 4.2/5</div>
                    </div>
                </div>

                <div>
                    <div style="font-size: 14px; margin-bottom: 10px; opacity: 0.9;">–ë–ª–∏–∂–∞–π—à–∏–µ –º–∞—Ç—á–∏:</div>
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px;">
                        <div style="margin-bottom: 8px;">‚Ä¢ –ß–µ–º–ø–∏–æ–Ω–∞—Ç: –°–ö–ê –†–æ—Å—Ç–æ–≤ vs –ó–µ–Ω–∏—Ç</div>
                        <div>‚Ä¢ –ö—É–±–æ–∫: –°–ö–ê –†–æ—Å—Ç–æ–≤ vs –°–ø–∞—Ä—Ç–∞–∫</div>
                    </div>
                </div>
            </div>
            <div class="back-button" onclick="showScreen('main')">–ù–∞–∑–∞–¥</div>
        </div>
    </div>

    <div id="notification" class="notification"></div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        let tg = window.Telegram.WebApp;
        tg.expand();
        tg.enableClosingConfirmation();

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        let gameState = {
            week: 1,
            season: 2024,
            day: 2, // 0-6 (–ø–Ω-–≤—Å)
            player: {
                name: "–ê–ª–µ–∫—Å–µ–π –ü–µ—Ç—Ä–æ–≤",
                age: 19,
                club: "–°–ö–ê –†–æ—Å—Ç–æ–≤",
                form: 84,
                morale: 76,
                energy: 65,
                physical: 82,
                mental: 78,
                technique: 85,
                injury: null
            }
        };

        // –î–Ω–∏ –Ω–µ–¥–µ–ª–∏
        const daysOfWeek = ['–ü–ù', '–í–¢', '–°–†', '–ß–¢', '–ü–¢', '–°–ë', '–í–°'];

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            loadGameState();
            updateUI();
            setupCalendar();
        });

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
        function loadGameState() {
            const saved = localStorage.getItem('footballCareerGame');
            if (saved) {
                gameState = JSON.parse(saved);
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
        function saveGameState() {
            localStorage.setItem('footballCareerGame', JSON.stringify(gameState));
            showNotification('–ò–≥—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞');
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI() {
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
            document.getElementById('currentWeek').textContent = gameState.week;
            document.getElementById('currentSeason').textContent = gameState.season;
            document.getElementById('playerName').textContent = gameState.player.name;
            document.getElementById('playerClub').textContent = gameState.player.club;
            document.getElementById('playerAge').textContent = gameState.player.age + ' –ª–µ—Ç';
            document.getElementById('detailedPlayerName').textContent = gameState.player.name;

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
            document.getElementById('statForm').textContent = gameState.player.form + '%';
            document.getElementById('statMorale').textContent = gameState.player.morale + '%';
            document.getElementById('statEnergy').textContent = gameState.player.energy + '%';

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ —ç–Ω–µ—Ä–≥–∏–∏
            const energyBar = document.getElementById('energyBar');
            energyBar.style.width = gameState.player.energy + '%';
            energyBar.className = 'progress-fill ' + 
                (gameState.player.energy > 70 ? 'energy-high' : 
                 gameState.player.energy > 30 ? 'energy-medium' : 'energy-low');

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤
            document.getElementById('attrPhysical').textContent = gameState.player.physical;
            document.getElementById('attrMental').textContent = gameState.player.mental;
            document.getElementById('attrTechnique').textContent = gameState.player.technique;

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–≤–º—ã
            const injuryWarning = document.getElementById('injuryWarning');
            if (gameState.player.injury) {
                injuryWarning.textContent = `‚ö†Ô∏è –¢–†–ê–í–ú–ê: ${gameState.player.injury.name} - ${gameState.player.injury.days} –¥–Ω–µ–π`;
                injuryWarning.classList.remove('hidden');
            } else {
                injuryWarning.classList.add('hidden');
            }

            // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
            saveGameState();
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
        function setupCalendar() {
            const calendarGrid = document.getElementById('calendarGrid');
            calendarGrid.innerHTML = '';

            daysOfWeek.forEach((day, index) => {
                const dayElement = document.createElement('div');
                dayElement.className = `calendar-day ${index === gameState.day ? 'day-current' : ''}`;
                
                let activity = '';
                if (index === 2) activity = '‚öΩ –ú–ê–¢–ß';
                else if ([0, 1, 4].includes(index)) activity = 'üèãÔ∏è –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞';
                else if (index === 5) activity = 'üéØ –°–æ–±—ã—Ç–∏–µ';
                else activity = 'üí§ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ';

                dayElement.innerHTML = `
                    <span>${day} ${index === gameState.day ? '‚û°Ô∏è' : ''}</span>
                    <span>${activity}</span>
                `;
                
                calendarGrid.appendChild(dayElement);
            });

            document.getElementById('calendarWeek').textContent = gameState.week;
            document.getElementById('nextMatchDays').textContent = Math.max(0, 2 - gameState.day);
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω
        function showScreen(screenName) {
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ —ç–∫—Ä–∞–Ω—ã
            document.querySelectorAll('[id$="Screen"], #mainMenu').forEach(screen => {
                screen.classList.add('hidden');
            });

            // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–π —ç–∫—Ä–∞–Ω
            if (screenName === 'main') {
                document.getElementById('mainMenu').classList.remove('hidden');
            } else {
                document.getElementById(screenName + 'Screen').classList.remove('hidden');
            }

            // –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
            if (screenName === 'calendar') {
                setupCalendar();
            }
        }

        // –í—ã–ø–æ–ª–Ω–∏—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É
        function performTraining(type) {
            if (gameState.player.energy <= 0) {
                showNotification('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏ –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏');
                return;
            }

            if (gameState.player.injury) {
                showNotification('‚ùå –ù–µ–ª—å–∑—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å —Ç—Ä–∞–≤–º–æ–π');
                return;
            }

            let message = '';
            let energyCost = 0;

            switch(type) {
                case 'physical':
                    energyCost = 15;
                    const staminaGain = Math.floor(Math.random() * 2) + 2;
                    gameState.player.physical = Math.min(99, gameState.player.physical + 1);
                    message = `üí™ –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ —Ñ–∏–∑. –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏: +${staminaGain} –∫ –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç–∏`;
                    break;
                case 'technical':
                    energyCost = 12;
                    const techGain = Math.floor(Math.random() * 2) + 2;
                    gameState.player.technique = Math.min(99, gameState.player.technique + techGain);
                    message = `üîß –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ —Ç–µ—Ö–Ω–∏–∫–∏: +${techGain} –∫ —Ç–µ—Ö–Ω–∏–∫–µ`;
                    break;
                case 'tactical':
                    energyCost = 10;
                    const decisionGain = Math.floor(Math.random() * 2) + 1;
                    gameState.player.mental = Math.min(99, gameState.player.mental + 1);
                    message = `üß† –¢–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞: +${decisionGain} –∫ —Ä–µ—à–µ–Ω–∏—é`;
                    break;
                case 'mental':
                    energyCost = 8;
                    const moraleGain = Math.floor(Math.random() * 4) + 2;
                    gameState.player.morale = Math.min(100, gameState.player.morale + moraleGain);
                    message = `üòå –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞: +${moraleGain} –∫ –º–æ—Ä–∞–ª–∏`;
                    break;
            }

            // –¢—Ä–∞—Ç–∏–º —ç–Ω–µ—Ä–≥–∏—é
            gameState.player.energy = Math.max(0, gameState.player.energy - energyCost);
            message += `, -${energyCost} —ç–Ω–µ—Ä–≥–∏–∏`;

            // –†–∏—Å–∫ —Ç—Ä–∞–≤–º—ã (5% —à–∞–Ω—Å)
            if (Math.random() < 0.05) {
                const injuries = [
                    { name: "–†–∞—Å—Ç—è–∂–µ–Ω–∏–µ —Å–≤—è–∑–æ–∫", days: 7 },
                    { name: "–£—à–∏–± –º—ã—à—Ü—ã", days: 3 },
                    { name: "–ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞", days: 2 }
                ];
                gameState.player.injury = injuries[Math.floor(Math.random() * injuries.length)];
                message += `\n‚ö†Ô∏è –¢–†–ê–í–ú–ê! ${gameState.player.injury.name}`;
            }

            // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å
            advanceDay();

            showNotification(message);
            updateUI();
        }

        // –í—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ
        function performAction(action) {
            let message = '';

            switch(action) {
                case 'rest':
                    const energyGain = Math.floor(Math.random() * 11) + 20;
                    gameState.player.energy = Math.min(100, gameState.player.energy + energyGain);
                    message = `üí§ –û—Ç–¥—ã—Ö: +${energyGain} —ç–Ω–µ—Ä–≥–∏–∏`;
                    break;
                case 'family':
                    if (gameState.player.energy < 5) {
                        showNotification('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏');
                        return;
                    }
                    const moraleGain = Math.floor(Math.random() * 6) + 5;
                    gameState.player.morale = Math.min(100, gameState.player.morale + moraleGain);
                    gameState.player.energy -= 5;
                    message = `üë®‚Äçüë©‚Äçüëß‚Äçüë¶ –í—Ä–µ–º—è —Å —Å–µ–º—å—ë–π: +${moraleGain} –º–æ—Ä–∞–ª–∏, -5 —ç–Ω–µ—Ä–≥–∏–∏`;
                    break;
                case 'media':
                    if (gameState.player.energy < 8) {
                        showNotification('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏');
                        return;
                    }
                    gameState.player.energy -= 8;
                    message = `üì∫ –ò–Ω—Ç–µ—Ä–≤—å—é: +0.2 —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ –°–ú–ò, -8 —ç–Ω–µ—Ä–≥–∏–∏`;
                    break;
            }

            // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å
            advanceDay();

            showNotification(message);
            updateUI();
        }

        // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å
        function advanceDay() {
            gameState.day++;
            if (gameState.day >= 7) {
                gameState.day = 0;
                gameState.week++;
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –Ω–µ–¥–µ–ª–∏
                handleWeekEvents();
            }

            // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Ç—Ä–∞–≤–º–µ
            if (gameState.player.injury) {
                gameState.player.injury.days--;
                if (gameState.player.injury.days <= 0) {
                    gameState.player.injury = null;
                    showNotification('‚úÖ –¢—Ä–∞–≤–º–∞ –≤—ã–ª–µ—á–µ–Ω–∞!');
                }
            }
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –Ω–µ–¥–µ–ª–∏
        function handleWeekEvents() {
            // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –Ω–∞—á–∞–ª–µ –Ω–µ–¥–µ–ª–∏
            gameState.player.energy = Math.min(100, gameState.player.energy + 20);
            gameState.player.morale = Math.min(100, gameState.player.morale + 10);

            showNotification('üîÑ –ù–∞—á–∞–ª–∞—Å—å –Ω–æ–≤–∞—è –Ω–µ–¥–µ–ª—è! +20 —ç–Ω–µ—Ä–≥–∏–∏, +10 –º–æ—Ä–∞–ª–∏');
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Ç Telegram
        tg.onEvent('viewportChanged', () => {
            tg.expand();
        });

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ Telegram –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
        function sendDataToTelegram() {
            const data = {
                player: gameState.player.name,
                week: gameState.week,
                season: gameState.season
            };
            tg.sendData(JSON.stringify(data));
        }
    </script>
</body>
</html>
