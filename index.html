<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRO: –ü—É—Ç—å –õ–µ–≥–µ–Ω–¥—ã</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
        }

        .status-bar {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .week-info {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 5px;
        }

        .auto-save {
            font-size: 12px;
            color: #4CAF50;
        }

        .player-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .player-name {
            font-size: 20px;
            font-weight: 600;
        }

        .player-club {
            font-size: 14px;
            opacity: 0.8;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }

        .stat-item {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 8px;
        }

        .stat-value {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.8;
        }

        .lifestyle-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            margin-top: 5px;
            overflow: hidden;
        }

        .lifestyle-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff4444, #ff9800, #4CAF50);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .injury-warning {
            background: #ff4444;
            color: white;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            margin-bottom: 15px;
            font-size: 14px;
        }

        .restriction-info {
            background: #ff9800;
            color: white;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            margin-bottom: 15px;
            font-size: 14px;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        .menu-button {
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 20px 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .menu-button:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
        }

        .menu-button:active {
            transform: translateY(0);
        }

        .menu-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .menu-button:disabled:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: none;
        }

        .button-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .button-text {
            font-size: 14px;
            font-weight: 500;
        }

        .advance-week-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 12px;
            padding: 15px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 20px;
            width: 100%;
            transition: all 0.3s ease;
        }

        .advance-week-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .advance-week-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .match-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }

        .match-action-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .match-action-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .match-action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .shop-item {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .shop-item:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .shop-item:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .shop-item-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .shop-item-price {
            color: #4CAF50;
            font-size: 14px;
        }

        .shop-item-effect {
            font-size: 12px;
            opacity: 0.8;
        }

        .customization-option {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .customization-option:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .customization-option.selected {
            background: rgba(76, 175, 80, 0.3);
            border-color: #4CAF50;
        }

        .hidden {
            display: none;
        }

        .progress-bar {
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            margin-top: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .energy-low { background: #ff4444; }
        .energy-medium { background: #ff9800; }
        .energy-high { background: #4CAF50; }

        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .notification.show {
            opacity: 1;
        }

        .back-button {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            margin-top: 10px;
        }

        .training-options, .calendar, .life-options {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .training-header, .calendar-header, .life-header {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            text-align: center;
        }

        .training-grid, .life-grid {
            display: grid;
            gap: 10px;
        }

        .training-button, .life-button {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .training-button:hover, .life-button:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .training-button:disabled, .life-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .training-type, .life-type {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .training-desc, .life-desc {
            font-size: 12px;
            opacity: 0.8;
        }

        .calendar-grid {
            display: grid;
            gap: 8px;
        }

        .calendar-day {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            font-size: 14px;
        }

        .day-current {
            background: rgba(76, 175, 80, 0.3);
            border: 1px solid #4CAF50;
        }

        .character-creation {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
        }

        .origin-option {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .origin-option:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .origin-option.selected {
            background: rgba(76, 175, 80, 0.3);
            border-color: #4CAF50;
        }

        .name-input {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 12px;
            color: white;
            font-size: 16px;
            width: 100%;
            margin-bottom: 15px;
        }

        .name-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .confirm-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin: 10px 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –≠–∫—Ä–∞–Ω —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ -->
        <div id="creationScreen">
            <div class="character-creation">
                <h1 style="margin-bottom: 20px;">‚öΩ PRO: –ü—É—Ç—å –õ–µ–≥–µ–Ω–¥—ã</h1>
                <p style="margin-bottom: 20px; opacity: 0.8;">–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–µ–≥–æ —Ñ—É—Ç–±–æ–ª–∏—Å—Ç–∞ –∏ –Ω–∞—á–Ω–∏—Ç–µ –ø—É—Ç—å –∫ —Å–ª–∞–≤–µ!</p>
                
                <div id="nameInputSection" class="hidden">
                    <input type="text" id="playerNameInput" class="name-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è —Ñ—É—Ç–±–æ–ª–∏—Å—Ç–∞" maxlength="20">
                    <button class="confirm-button" onclick="confirmName()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
                    <button class="confirm-button" onclick="showOriginSelection()">–ù–∞–∑–∞–¥</button>
                </div>

                <div id="originSelectionSection">
                    <h3 style="margin-bottom: 15px;">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ:</h3>
                    <div class="origin-option" onclick="selectOrigin('premier')">
                        <div style="font-weight: 600;">üá¨üáß –ê–∫–∞–¥–µ–º–∏—è –ü—Ä–µ–º—å–µ—Ä-–õ–∏–≥–∏</div>
                        <div style="font-size: 12px; opacity: 0.8;">–•–æ—Ä–æ—à–∏–µ —É—Å–ª–æ–≤–∏—è, –≤—ã—Å–æ–∫–∞—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è</div>
                    </div>
                    <div class="origin-option" onclick="selectOrigin('us')">
                        <div style="font-weight: 600;">üá∫üá∏ –°—Ç—É–¥–µ–Ω—á–µ—Å–∫–∞—è –∫–æ–º–∞–Ω–¥–∞ –°–®–ê</div>
                        <div style="font-size: 12px; opacity: 0.8;">–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ—Å—Ç—å, –ø—Ä–æ–±–∏–≤–∞–π—Ç–µ—Å—å —á–µ—Ä–µ–∑ —Å–∫–∞—É—Ç–æ–≤</div>
                    </div>
                    <div class="origin-option" onclick="selectOrigin('brazil')">
                        <div style="font-weight: 600;">üáßüá∑ –£–ª–∏—á–Ω—ã–π —Ñ—É—Ç–±–æ–ª –ë—Ä–∞–∑–∏–ª–∏–∏</div>
                        <div style="font-size: 12px; opacity: 0.8;">–ú–∞–∫—Å–∏–º—É–º —Ç–µ—Ö–Ω–∏–∫–∏, –º–∏–Ω–∏–º—É–º —Ç–∞–∫—Ç–∏–∫–∏</div>
                    </div>
                    <div class="origin-option" onclick="selectOrigin('europe')">
                        <div style="font-weight: 600;">üá™üá∫ –ú–æ–ª–æ–¥—ë–∂–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –ï–≤—Ä–æ–ø—ã</div>
                        <div style="font-size: 12px; opacity: 0.8;">–ú–µ–Ω—å—à–µ –¥–∞–≤–ª–µ–Ω–∏—è, –±–æ–ª—å—à–µ –∏–≥—Ä–æ–≤–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
        <div id="mainMenu" class="hidden">
            <div class="status-bar">
                <div class="week-info">–ù–µ–¥–µ–ª—è: <span id="currentWeek">1</span> | –°–µ–∑–æ–Ω: <span id="currentSeason">2024</span></div>
                <div class="auto-save">–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ: ‚óè –ê–∫—Ç–∏–≤–Ω–æ</div>
            </div>

            <button class="advance-week-btn" id="advanceWeekBtn" onclick="advanceWeek()">
                ‚è≠Ô∏è –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é –Ω–µ–¥–µ–ª—é
            </button>

            <div class="player-card">
                <div class="player-header">
                    <div>
                        <div class="player-name" id="playerName">–ê–ª–µ–∫—Å–µ–π –ü–µ—Ç—Ä–æ–≤</div>
                        <div class="player-club" id="playerClub">–°–ö–ê –†–æ—Å—Ç–æ–≤</div>
                    </div>
                    <div class="player-age" id="playerAge">19 –ª–µ—Ç</div>
                </div>

                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="statForm">84%</div>
                        <div class="stat-label">–§–æ—Ä–º–∞</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="statMorale">76%</div>
                        <div class="stat-label">–ú–æ—Ä–∞–ª—å</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="statEnergy">65%</div>
                        <div class="stat-label">–≠–Ω–µ—Ä–≥–∏—è</div>
                        <div class="progress-bar">
                            <div class="progress-fill energy-medium" id="energyBar" style="width: 65%"></div>
                        </div>
                    </div>
                </div>

                <div style="margin-top: 15px;">
                    <div style="font-size: 12px; margin-bottom: 5px; opacity: 0.8;">–û–±—Ä–∞–∑ –∂–∏–∑–Ω–∏:</div>
                    <div class="lifestyle-bar">
                        <div class="lifestyle-fill" id="lifestyleBar" style="width: 50%"></div>
                    </div>
                </div>

                <div id="injuryWarning" class="injury-warning hidden">
                    ‚ö†Ô∏è –¢–†–ê–í–ú–ê: –†–∞—Å—Ç—è–∂–µ–Ω–∏–µ —Å–≤—è–∑–æ–∫ - 7 –¥–Ω–µ–π
                </div>

                <div id="restrictionInfo" class="restriction-info hidden">
                    üí§ –û—Ç–¥—ã—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —Å–µ–≥–æ–¥–Ω—è
                </div>
            </div>

            <div class="menu-grid">
                <div class="menu-button" onclick="showScreen('status')">
                    <div class="button-icon">üìä</div>
                    <div class="button-text">–°—Ç–∞—Ç—É—Å</div>
                </div>
                <div class="menu-button" onclick="showScreen('calendar')">
                    <div class="button-icon">üìÖ</div>
                    <div class="button-text">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</div>
                </div>
                <div class="menu-button" id="trainingBtn" onclick="showScreen('training')">
                    <div class="button-icon">üèãÔ∏è</div>
                    <div class="button-text">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>
                </div>
                <div class="menu-button" id="restBtn" onclick="performAction('rest')">
                    <div class="button-icon">üí§</div>
                    <div class="button-text">–û—Ç–¥—ã—Ö</div>
                </div>
                <div class="menu-button" onclick="showScreen('life')">
                    <div class="button-icon">üéØ</div>
                    <div class="button-text">–ñ–∏–∑–Ω—å</div>
                </div>
                <div class="menu-button" id="matchBtn" onclick="showScreen('match')">
                    <div class="button-icon">‚öΩ</div>
                    <div class="button-text">–ú–∞—Ç—á</div>
                </div>
                <div class="menu-button" onclick="showScreen('shop')">
                    <div class="button-icon">üõí</div>
                    <div class="button-text">–ú–∞–≥–∞–∑–∏–Ω</div>
                </div>
                <div class="menu-button" onclick="showScreen('customize')">
                    <div class="button-icon">üë§</div>
                    <div class="button-text">–í–Ω–µ—à–Ω–æ—Å—Ç—å</div>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Å—Ç–∞—Ç—É—Å–∞ -->
        <div id="statusScreen" class="hidden">
            <div class="player-card">
                <div class="player-header">
                    <div class="player-name" id="detailedPlayerName">–ê–ª–µ–∫—Å–µ–π –ü–µ—Ç—Ä–æ–≤</div>
                    <div class="player-age">19 –ª–µ—Ç</div>
                </div>

                <div style="margin-bottom: 20px;">
                    <div style="font-size: 16px; font-weight: 600; margin-bottom: 10px;">–û—Å–Ω–æ–≤–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã:</div>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="attrPhysical">82</div>
                            <div class="stat-label">–§–∏–∑. —Ñ–æ—Ä–º–∞</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="attrMental">78</div>
                            <div class="stat-label">–ú–µ–Ω—Ç–∞–ª–∏—Ç–µ—Ç</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="attrTechnique">85</div>
                            <div class="stat-label">–¢–µ—Ö–Ω–∏–∫–∞</div>
                        </div>
                    </div>
                </div>

                <div style="margin-bottom: 20px;">
                    <div style="font-size: 16px; font-weight: 600; margin-bottom: 10px;">–§–∏–Ω–∞–Ω—Å—ã:</div>
                    <div class="stat-item">
                        <div class="stat-value">‚Ç¨<span id="detailedSavings">120,000</span></div>
                        <div class="stat-label">–ù–∞–∫–æ–ø–ª–µ–Ω–∏—è</div>
                    </div>
                </div>

                <div style="margin-bottom: 20px;">
                    <div style="font-size: 16px; font-weight: 600; margin-bottom: 10px;">–û—Ç–Ω–æ—à–µ–Ω–∏—è:</div>
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px;">
                        <div style="margin-bottom: 8px;">–¢—Ä–µ–Ω–µ—Ä: <span id="coachRelationship">50</span>/100</div>
                        <div>–ö–æ–º–∞–Ω–¥–∞: <span id="teamRelationship">75</span>/100</div>
                    </div>
                </div>

                <div>
                    <div style="font-size: 16px; font-weight: 600; margin-bottom: 10px;">–†–µ–ø—É—Ç–∞—Ü–∏—è:</div>
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px;">
                        <div style="margin-bottom: 8px;">–ë–æ–ª–µ–ª—å—â–∏–∫–∏: <span id="fanReputation">4.2</span>/5</div>
                        <div style="margin-bottom: 8px;">–†–∞–∑–¥–µ–≤–∞–ª–∫–∞: <span id="dressingReputation">4.8</span>/5</div>
                        <div>–°–ú–ò: <span id="mediaReputation">4.0</span>/5</div>
                    </div>
                </div>
            </div>

            <div class="back-button" onclick="showScreen('main')">–ù–∞–∑–∞–¥</div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –∫–∞–ª–µ–Ω–¥–∞—Ä—è -->
        <div id="calendarScreen" class="hidden">
            <div class="calendar">
                <div class="calendar-header">–ö–∞–ª–µ–Ω–¥–∞—Ä—å | –ù–µ–¥–µ–ª—è <span id="calendarWeek">1</span></div>
                <div class="calendar-grid" id="calendarGrid">
                    <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                </div>
                <div style="margin-top: 15px; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 8px; text-align: center;">
                    ‚öΩ –°–ª–µ–¥—É—é—â–∏–π –º–∞—Ç—á: —á–µ—Ä–µ–∑ <span id="nextMatchDays">2</span> –¥–Ω–µ–π
                </div>
            </div>
            <div class="back-button" onclick="showScreen('main')">–ù–∞–∑–∞–¥</div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ -->
        <div id="trainingScreen" class="hidden">
            <div class="training-options">
                <div class="training-header">–í—ã–±–æ—Ä —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</div>
                <div class="training-grid">
                    <div class="training-button" id="trainPhysical" onclick="performTraining('physical')">
                        <div class="training-type">üí™ –§–∏–∑. –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞</div>
                        <div class="training-desc">+2-3 –∫ –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç–∏, -15 —ç–Ω–µ—Ä–≥–∏–∏</div>
                    </div>
                    <div class="training-button" id="trainTechnical" onclick="performTraining('technical')">
                        <div class="training-type">üîß –¢–µ—Ö–Ω–∏–∫–∞</div>
                        <div class="training-desc">+2-3 –∫ —Ç–µ—Ö–Ω–∏–∫–µ, -12 —ç–Ω–µ—Ä–≥–∏–∏</div>
                    </div>
                    <div class="training-button" id="trainTactical" onclick="performTraining('tactical')">
                        <div class="training-type">üß† –¢–∞–∫—Ç–∏–∫–∞</div>
                        <div class="training-desc">+1-2 –∫ —Ä–µ—à–µ–Ω–∏—é, -10 —ç–Ω–µ—Ä–≥–∏–∏</div>
                    </div>
                    <div class="training-button" id="trainMental" onclick="performTraining('mental')">
                        <div class="training-type">üòå –ü—Å–∏—Ö–æ–ª–æ–≥–∏—è</div>
                        <div class="training-desc">+2-5 –∫ –º–æ—Ä–∞–ª–∏, -8 —ç–Ω–µ—Ä–≥–∏–∏</div>
                    </div>
                </div>
            </div>
            <div class="back-button" onclick="showScreen('main')">–ù–∞–∑–∞–¥</div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –∂–∏–∑–Ω–∏ -->
        <div id="lifeScreen" class="hidden">
            <div class="life-options">
                <div class="life-header">–ñ–∏–∑–Ω—å –≤–Ω–µ –ø–æ–ª—è</div>
                <div class="life-grid">
                    <div class="life-button" id="lifeFamily" onclick="performLifeAction('family')">
                        <div class="life-type">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ –°–µ–º—å—è</div>
                        <div class="life-desc">+5-10 –º–æ—Ä–∞–ª–∏, -5 —ç–Ω–µ—Ä–≥–∏–∏, +2 –∫ –æ–±—Ä–∞–∑—É –∂–∏–∑–Ω–∏</div>
                    </div>
                    <div class="life-button" id="lifeMedia" onclick="performLifeAction('media')">
                        <div class="life-type">üì∫ –°–ú–ò</div>
                        <div class="life-desc">+0.1-0.3 —Ä–µ–ø—É—Ç–∞—Ü–∏–∏, -8 —ç–Ω–µ—Ä–≥–∏–∏, +1 –∫ –æ–±—Ä–∞–∑—É –∂–∏–∑–Ω–∏</div>
                    </div>
                    <div class="life-button" id="lifeSocial" onclick="performLifeAction('social')">
                        <div class="life-type">üì± –°–æ—Ü—Å–µ—Ç–∏</div>
                        <div class="life-desc">+0.1-0.2 —Ä–µ–ø—É—Ç–∞—Ü–∏–∏, -6 —ç–Ω–µ—Ä–≥–∏–∏, +3 –∫ –æ–±—Ä–∞–∑—É –∂–∏–∑–Ω–∏</div>
                    </div>
                    <div class="life-button" id="lifeBusiness" onclick="performLifeAction('business')">
                        <div class="life-type">üíº –ë–∏–∑–Ω–µ—Å</div>
                        <div class="life-desc">+5,000-15,000 –¥–æ—Ö–æ–¥–∞, -12 —ç–Ω–µ—Ä–≥–∏–∏, +5 –∫ –æ–±—Ä–∞–∑—É –∂–∏–∑–Ω–∏</div>
                    </div>
                    <div class="life-button" id="lifeHobby" onclick="performLifeAction('hobby')">
                        <div class="life-type">üé® –•–æ–±–±–∏</div>
                        <div class="life-desc">+3-8 –º–æ—Ä–∞–ª–∏, -4 —ç–Ω–µ—Ä–≥–∏–∏, +4 –∫ –æ–±—Ä–∞–∑—É –∂–∏–∑–Ω–∏</div>
                    </div>
                </div>
            </div>
            <div class="back-button" onclick="showScreen('main')">–ù–∞–∑–∞–¥</div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –º–∞—Ç—á–∞ -->
        <div id="matchScreen" class="hidden">
            <div class="player-card">
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 20px; font-weight: 600;">‚öΩ –¢–µ–∫—É—â–∏–π –º–∞—Ç—á</div>
                    <div style="opacity: 0.8;" id="matchTeams">–°–ö–ê –†–æ—Å—Ç–æ–≤ vs –ó–µ–Ω–∏—Ç</div>
                </div>

                <div class="match-actions">
                    <div class="match-action-btn" id="matchAttack" onclick="performMatchAction('attack')">
                        <div>‚ö° –ê—Ç–∞–∫–∞</div>
                        <div style="font-size: 12px; opacity: 0.8;">-3 —ç–Ω–µ—Ä–≥–∏–∏</div>
                    </div>
                    <div class="match-action-btn" id="matchDefend" onclick="performMatchAction('defend')">
                        <div>üõ°Ô∏è –û–±–æ—Ä–æ–Ω–∞</div>
                        <div style="font-size: 12px; opacity: 0.8;">-2 —ç–Ω–µ—Ä–≥–∏–∏</div>
                    </div>
                    <div class="match-action-btn" id="matchPass" onclick="performMatchAction('pass')">
                        <div>üéØ –ü–∞—Å—Å</div>
                        <div style="font-size: 12px; opacity: 0.8;">-2 —ç–Ω–µ—Ä–≥–∏–∏</div>
                    </div>
                    <div class="match-action-btn" id="matchDribble" onclick="performMatchAction('dribble')">
                        <div>üåÄ –î—Ä–∏–±–ª–∏–Ω–≥</div>
                        <div style="font-size: 12px; opacity: 0.8;">-3 —ç–Ω–µ—Ä–≥–∏–∏</div>
                    </div>
                    <div class="match-action-btn" id="matchShoot" onclick="performMatchAction('shoot')">
                        <div>üí• –£–¥–∞—Ä</div>
                        <div style="font-size: 12px; opacity: 0.8;">-4 —ç–Ω–µ—Ä–≥–∏–∏</div>
                    </div>
                </div>

                <div id="matchEvents" style="max-height: 200px; overflow-y: auto; margin-top: 15px; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 8px;">
                    <div style="text-align: center; opacity: 0.7;">–°–æ–±—ã—Ç–∏—è –º–∞—Ç—á–∞ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å</div>
                </div>
            </div>
            <div class="back-button" onclick="showScreen('main')">–ó–∞–≤–µ—Ä—à–∏—Ç—å –º–∞—Ç—á</div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –º–∞–≥–∞–∑–∏–Ω–∞ -->
        <div id="shopScreen" class="hidden">
            <div class="player-card">
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 20px; font-weight: 600;">üõí –ú–∞–≥–∞–∑–∏–Ω</div>
                    <div style="opacity: 0.8;">–ë–∞–ª–∞–Ω—Å: ‚Ç¨<span id="shopBalance">0</span></div>
                    <div style="font-size: 14px; opacity: 0.7; margin-top: 5px;">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å: <span id="inventoryList">–ø—É—Å—Ç–æ</span></div>
                </div>

                <div id="shopItems">
                    <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>
            <div class="back-button" onclick="showScreen('main')">–ù–∞–∑–∞–¥</div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ -->
        <div id="customizeScreen" class="hidden">
            <div class="player-card">
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 20px; font-weight: 600;">üë§ –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è</div>
                </div>

                <div style="margin-bottom: 20px;">
                    <div style="font-size: 16px; margin-bottom: 10px;">–ü—Ä–∏—á–µ—Å–∫–∞:</div>
                    <div class="customization-option selected" onclick="selectAppearance('hair_style', 'short')">
                        üíá –ö–æ—Ä–æ—Ç–∫–∞—è —Å—Ç—Ä–∏–∂–∫–∞
                    </div>
                    <div class="customization-option" onclick="selectAppearance('hair_style', 'medium')">
                        üíá –°—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞
                    </div>
                    <div class="customization-option" onclick="selectAppearance('hair_style', 'long')">
                        üíá –î–ª–∏–Ω–Ω—ã–µ –≤–æ–ª–æ—Å—ã
                    </div>
                </div>

                <div style="margin-bottom: 20px;">
                    <div style="font-size: 16px; margin-bottom: 10px;">–¶–≤–µ—Ç –≤–æ–ª–æ—Å:</div>
                    <div class="customization-option selected" onclick="selectAppearance('hair_color', 'brown')">
                        üü§ –ö–æ—Ä–∏—á–Ω–µ–≤—ã–π
                    </div>
                    <div class="customization-option" onclick="selectAppearance('hair_color', 'blonde')">
                        üü° –ë–µ–ª–æ–∫—É—Ä—ã–π
                    </div>
                    <div class="customization-option" onclick="selectAppearance('hair_color', 'black')">
                        ‚ö´ –ß–µ—Ä–Ω—ã–π
                    </div>
                    <div class="customization-option" onclick="selectAppearance('hair_color', 'red')">
                        üî¥ –†—ã–∂–∏–π
                    </div>
                </div>
            </div>
            <div class="back-button" onclick="showScreen('main')">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –≤—ã–π—Ç–∏</div>
        </div>

    </div>

    <div id="notification" class="notification"></div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        let tg = window.Telegram.WebApp;
        tg.expand();
        tg.enableClosingConfirmation();

        // –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ç—Ä–∞–≤–º
        const INJURY_DATABASE = {
            "light": [
                {"name": "–†–∞—Å—Ç—è–∂–µ–Ω–∏–µ —Å–≤—è–∑–æ–∫ –≥–æ–ª–µ–Ω–æ—Å—Ç–æ–ø–∞", "days": 14},
                {"name": "–£—à–∏–± –º—ã—à—Ü—ã –±–µ–¥—Ä–∞", "days": 7},
                {"name": "–°–æ—Ç—Ä—è—Å–µ–Ω–∏–µ –º–æ–∑–≥–∞", "days": 10},
                {"name": "–†–∞—Å—Ç—è–∂–µ–Ω–∏–µ –ø–∞—Ö–æ–≤—ã—Ö —Å–≤—è–∑–æ–∫", "days": 21}
            ],
            "medium": [
                {"name": "–†–∞–∑—Ä—ã–≤ –º–µ–Ω–∏—Å–∫–∞", "days": 90},
                {"name": "–†–∞—Å—Ç—è–∂–µ–Ω–∏–µ –ø–æ–¥–∫–æ–ª–µ–Ω–Ω–æ–≥–æ —Å—É—Ö–æ–∂–∏–ª–∏—è", "days": 45},
                {"name": "–°—Ç—Ä–µ—Å—Å-–ø–µ—Ä–µ–ª–æ–º –ø–ª—é—Å–Ω–µ–≤–æ–π –∫–æ—Å—Ç–∏", "days": 60},
                {"name": "–†–∞–∑—Ä—ã–≤ —Å–≤—è–∑–æ–∫ –∫–æ–ª–µ–Ω–∞", "days": 75}
            ],
            "severe": [
                {"name": "–†–∞–∑—Ä—ã–≤ –ø–µ—Ä–µ–¥–Ω–µ–π –∫—Ä–µ—Å—Ç–æ–æ–±—Ä–∞–∑–Ω–æ–π —Å–≤—è–∑–∫–∏", "days": 270},
                {"name": "–†–∞–∑—Ä—ã–≤ –∞—Ö–∏–ª–ª–æ–≤–∞ —Å—É—Ö–æ–∂–∏–ª–∏—è", "days": 210},
                {"name": "–°–ª–æ–∂–Ω—ã–π –ø–µ—Ä–µ–ª–æ–º –ª–æ–¥—ã–∂–∫–∏", "days": 180},
                {"name": "–†–∞–∑—Ä—ã–≤ –∑–∞–¥–Ω–µ–π –∫—Ä–µ—Å—Ç–æ–æ–±—Ä–∞–∑–Ω–æ–π —Å–≤—è–∑–∫–∏", "days": 240}
            ]
        };

        // –¢–æ–≤–∞—Ä—ã –º–∞–≥–∞–∑–∏–Ω–∞
        const SHOP_ITEMS = [
            {id: 1, name: "–ë—É—Ç—Å—ã –ø—Ä–µ–º–∏—É–º", price: 50000, effect: "+2 –∫ —Ç–µ—Ö–Ω–∏–∫–µ"},
            {id: 2, name: "–¢—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–π –∫–æ—Å—Ç—é–º", price: 25000, effect: "+1 –∫ –º–æ—Ä–∞–ª–∏"},
            {id: 3, name: "–ü—Ä–æ—Ç–µ–∏–Ω–æ–≤—ã–µ –¥–æ–±–∞–≤–∫–∏", price: 15000, effect: "+5 —ç–Ω–µ—Ä–≥–∏–∏"},
            {id: 4, name: "–ß–∞—Å—Ç–Ω—ã–π —Ç—Ä–µ–Ω–µ—Ä", price: 100000, effect: "+3 –∫ —Ñ–∏–∑–∏–∫–µ"},
            {id: 5, name: "–ü—Å–∏—Ö–æ–ª–æ–≥", price: 75000, effect: "+5 –∫ –º–µ–Ω—Ç–∞–ª–∏—Ç–µ—Ç—É"},
            {id: 6, name: "–ú–∞—Å—Å–∞–∂–Ω–æ–µ –∫—Ä–µ—Å–ª–æ", price: 50000, effect: "+10 –∫ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é"}
        ];

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        let gameState = {
            week: 1,
            season: 2024,
            day: 2,
            dailyRestUsed: false,
            player: {
                name: "",
                age: 16,
                club: "",
                form: 75,
                morale: 70,
                energy: 100,
                lifestyle: 50,
                physical: 50,
                mental: 50,
                technique: 50,
                stamina: 60,
                injury_proneness: 30,
                recovery: 50,
                composure: 50,
                decision: 50,
                leadership: 30,
                willpower: 60,
                savings: 50000,
                coach_relationship: 50,
                team_relationship: 75,
                fan_reputation: 3.0,
                dressing_room_reputation: 3.0,
                media_reputation: 3.0,
                injury: null,
                appearance: {
                    hair_style: "short",
                    hair_color: "brown"
                },
                inventory: [],
                matchEvents: []
            },
            selectedOrigin: null
        };

        // –î–Ω–∏ –Ω–µ–¥–µ–ª–∏
        const daysOfWeek = ['–ü–ù', '–í–¢', '–°–†', '–ß–¢', '–ü–¢', '–°–ë', '–í–°'];

        // –ö–ª—É–±—ã –ø–æ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—é
        const CLUBS = {
            'premier': ['–ú–∞–Ω—á–µ—Å—Ç–µ—Ä –Æ–Ω–∞–π—Ç–µ–¥', '–õ–∏–≤–µ—Ä–ø—É–ª—å', '–ß–µ–ª—Å–∏', '–ê—Ä—Å–µ–Ω–∞–ª'],
            'us': ['–õ–æ—Å-–ê–Ω–¥–∂–µ–ª–µ—Å –ì—ç–ª–∞–∫—Å–∏', '–ù—å—é-–ô–æ—Ä–∫ –°–∏—Ç–∏', '–ê—Ç–ª–∞–Ω—Ç–∞ –Æ–Ω–∞–π—Ç–µ–¥'],
            'brazil': ['–§–ª–∞–º–µ–Ω–≥–æ', '–°–∞–Ω—Ç–æ—Å', '–ü–∞–ª–º–µ–π—Ä–∞—Å', '–ö–æ—Ä–∏–Ω—Ç–∏–∞–Ω—Å'],
            'europe': ['–°–ö–ê –†–æ—Å—Ç–æ–≤', '–î–∏–Ω–∞–º–æ –ö–∏–µ–≤', '–ê—è–∫—Å', '–ë–µ–Ω—Ñ–∏–∫–∞']
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            loadGameState();
            if (!gameState.player.name) {
                showCreationScreen();
            } else {
                showMainMenu();
            }
        });

        // –ü–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω —Å–æ–∑–¥–∞–Ω–∏—è
        function showCreationScreen() {
            document.getElementById('creationScreen').classList.remove('hidden');
            document.getElementById('mainMenu').classList.add('hidden');
        }

        // –í—ã–±–æ—Ä –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è
        function selectOrigin(origin) {
            gameState.selectedOrigin = origin;
            document.querySelectorAll('.origin-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            document.getElementById('originSelectionSection').classList.add('hidden');
            document.getElementById('nameInputSection').classList.remove('hidden');
        }

        // –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –≤—ã–±–æ—Ä—É –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è
        function showOriginSelection() {
            document.getElementById('nameInputSection').classList.add('hidden');
            document.getElementById('originSelectionSection').classList.remove('hidden');
        }

        // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–º–µ–Ω–∏
        function confirmName() {
            const name = document.getElementById('playerNameInput').value.trim();
            if (name.length < 2) {
                showNotification('‚ùå –í–≤–µ–¥–∏—Ç–µ –∏–º—è (–º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞)');
                return;
            }

            createPlayer(name, gameState.selectedOrigin);
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
        function createPlayer(name, origin) {
            gameState.player.name = name;
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è
            switch(origin) {
                case 'premier':
                    gameState.player.club = CLUBS.premier[Math.floor(Math.random() * CLUBS.premier.length)];
                    gameState.player.technique += 10;
                    gameState.player.mental += 5;
                    gameState.player.salary = 15000;
                    break;
                case 'us':
                    gameState.player.club = CLUBS.us[Math.floor(Math.random() * CLUBS.us.length)];
                    gameState.player.physical += 10;
                    gameState.player.stamina += 5;
                    gameState.player.salary = 8000;
                    break;
                case 'brazil':
                    gameState.player.club = CLUBS.brazil[Math.floor(Math.random() * CLUBS.brazil.length)];
                    gameState.player.technique += 15;
                    gameState.player.composure += 5;
                    gameState.player.salary = 10000;
                    break;
                case 'europe':
                    gameState.player.club = CLUBS.europe[Math.floor(Math.random() * CLUBS.europe.length)];
                    gameState.player.mental += 10;
                    gameState.player.decision += 5;
                    gameState.player.salary = 12000;
                    break;
            }

            showNotification(`‚úÖ –ò–≥—Ä–æ–∫ —Å–æ–∑–¥–∞–Ω! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ ${gameState.player.club}`);
            saveGameState();
            showMainMenu();
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
        function showMainMenu() {
            document.getElementById('creationScreen').classList.add('hidden');
            document.getElementById('mainMenu').classList.remove('hidden');
            updateUI();
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
        function loadGameState() {
            const saved = localStorage.getItem('footballCareerGame');
            if (saved) {
                const parsed = JSON.parse(saved);
                gameState = {...gameState, ...parsed};
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
        function saveGameState() {
            localStorage.setItem('footballCareerGame', JSON.stringify(gameState));
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI() {
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
            document.getElementById('currentWeek').textContent = gameState.week;
            document.getElementById('currentSeason').textContent = gameState.season;
            document.getElementById('playerName').textContent = gameState.player.name;
            document.getElementById('playerClub').textContent = gameState.player.club;
            document.getElementById('playerAge').textContent = gameState.player.age + ' –ª–µ—Ç';
            document.getElementById('detailedPlayerName').textContent = gameState.player.name;

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
            document.getElementById('statForm').textContent = gameState.player.form + '%';
            document.getElementById('statMorale').textContent = gameState.player.morale + '%';
            document.getElementById('statEnergy').textContent = gameState.player.energy + '%';

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ —ç–Ω–µ—Ä–≥–∏–∏
            const energyBar = document.getElementById('energyBar');
            energyBar.style.width = gameState.player.energy + '%';
            energyBar.className = 'progress-fill ' + 
                (gameState.player.energy > 70 ? 'energy-high' : 
                 gameState.player.energy > 30 ? 'energy-medium' : 'energy-low');

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —à–∫–∞–ª—ã –æ–±—Ä–∞–∑–∞ –∂–∏–∑–Ω–∏
            document.getElementById('lifestyleBar').style.width = gameState.player.lifestyle + '%';

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤
            document.getElementById('attrPhysical').textContent = gameState.player.physical;
            document.getElementById('attrMental').textContent = gameState.player.mental;
            document.getElementById('attrTechnique').textContent = gameState.player.technique;

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤
            document.getElementById('detailedSavings').textContent = gameState.player.savings.toLocaleString();

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π
            document.getElementById('coachRelationship').textContent = gameState.player.coach_relationship;
            document.getElementById('teamRelationship').textContent = gameState.player.team_relationship;

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏
            document.getElementById('fanReputation').textContent = gameState.player.fan_reputation.toFixed(1);
            document.getElementById('dressingReputation').textContent = gameState.player.dressing_room_reputation.toFixed(1);
            document.getElementById('mediaReputation').textContent = gameState.player.media_reputation.toFixed(1);

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–≤–º—ã
            const injuryWarning = document.getElementById('injuryWarning');
            if (gameState.player.injury) {
                injuryWarning.textContent = `‚ö†Ô∏è –¢–†–ê–í–ú–ê: ${gameState.player.injury.name} - ${gameState.player.injury.days} –¥–Ω–µ–π`;
                injuryWarning.classList.remove('hidden');
            } else {
                injuryWarning.classList.add('hidden');
            }

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
            const restrictionInfo = document.getElementById('restrictionInfo');
            if (gameState.dailyRestUsed) {
                restrictionInfo.classList.remove('hidden');
            } else {
                restrictionInfo.classList.add('hidden');
            }

            updateButtonStates();
            saveGameState();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–Ω–æ–ø–æ–∫
        function updateButtonStates() {
            const trainingBtn = document.getElementById('trainingBtn');
            const restBtn = document.getElementById('restBtn');
            const matchBtn = document.getElementById('matchBtn');
            const advanceWeekBtn = document.getElementById('advanceWeekBtn');
            
            // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–µ —ç–Ω–µ—Ä–≥–∏–∏ –∏–ª–∏ —Ç—Ä–∞–≤–º–µ
            trainingBtn.disabled = gameState.player.energy <= 0 || gameState.player.injury;
            
            // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –æ—Ç–¥—ã—Ö–∞ –µ—Å–ª–∏ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω
            restBtn.disabled = gameState.dailyRestUsed;
            
            // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –º–∞—Ç—á–∞ –ø—Ä–∏ —Ç—Ä–∞–≤–º–µ
            matchBtn.disabled = gameState.player.injury;

            // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–µ–¥–µ–ª–∏ –µ—Å–ª–∏ –µ—Å—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
            advanceWeekBtn.disabled = !canAdvanceWeek();

            // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–æ–∫ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
            document.getElementById('trainPhysical').disabled = gameState.player.energy < 15 || gameState.player.injury;
            document.getElementById('trainTechnical').disabled = gameState.player.energy < 12 || gameState.player.injury;
            document.getElementById('trainTactical').disabled = gameState.player.energy < 10 || gameState.player.injury;
            document.getElementById('trainMental').disabled = gameState.player.energy < 8 || gameState.player.injury;

            // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π –≤ –∂–∏–∑–Ω–∏
            document.getElementById('lifeFamily').disabled = gameState.player.energy < 5;
            document.getElementById('lifeMedia').disabled = gameState.player.energy < 8;
            document.getElementById('lifeSocial').disabled = gameState.player.energy < 6;
            document.getElementById('lifeBusiness').disabled = gameState.player.energy < 12;
            document.getElementById('lifeHobby').disabled = gameState.player.energy < 4;

            // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–æ–∫ –≤ –º–∞—Ç—á–µ
            document.getElementById('matchAttack').disabled = gameState.player.energy < 3;
            document.getElementById('matchDefend').disabled = gameState.player.energy < 2;
            document.getElementById('matchPass').disabled = gameState.player.energy < 2;
            document.getElementById('matchDribble').disabled = gameState.player.energy < 3;
            document.getElementById('matchShoot').disabled = gameState.player.energy < 4;
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é –Ω–µ–¥–µ–ª—é
        function canAdvanceWeek() {
            return gameState.day === 6; // –ú–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
        function setupCalendar() {
            const calendarGrid = document.getElementById('calendarGrid');
            calendarGrid.innerHTML = '';

            daysOfWeek.forEach((day, index) => {
                const dayElement = document.createElement('div');
                dayElement.className = `calendar-day ${index === gameState.day ? 'day-current' : ''}`;
                
                let activity = '';
                if (index === 2) activity = '‚öΩ –ú–ê–¢–ß';
                else if ([0, 1, 4].includes(index)) activity = 'üèãÔ∏è –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞';
                else if (index === 5) activity = 'üéØ –°–æ–±—ã—Ç–∏–µ';
                else activity = 'üí§ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ';

                dayElement.innerHTML = `
                    <span>${day} ${index === gameState.day ? '‚û°Ô∏è' : ''}</span>
                    <span>${activity}</span>
                `;
                
                calendarGrid.appendChild(dayElement);
            });

            document.getElementById('calendarWeek').textContent = gameState.week;
            document.getElementById('nextMatchDays').textContent = Math.max(0, 2 - gameState.day);
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω
        function showScreen(screenName) {
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ —ç–∫—Ä–∞–Ω—ã
            document.querySelectorAll('[id$="Screen"], #mainMenu').forEach(screen => {
                screen.classList.add('hidden');
            });

            // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–π —ç–∫—Ä–∞–Ω
            if (screenName === 'main') {
                document.getElementById('mainMenu').classList.remove('hidden');
            } else {
                document.getElementById(screenName + 'Screen').classList.remove('hidden');
            }

            // –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
            if (screenName === 'calendar') {
                setupCalendar();
            } else if (screenName === 'shop') {
                setupShop();
            } else if (screenName === 'match') {
                updateMatchEvents();
            }
        }

        // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é –Ω–µ–¥–µ–ª—é
        function advanceWeek() {
            if (!canAdvanceWeek()) {
                showNotification('‚ùå –ú–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏');
                return;
            }

            gameState.week++;
            gameState.day = 0;
            gameState.dailyRestUsed = false;
            
            // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
            gameState.player.energy = Math.min(100, gameState.player.energy + 30);
            gameState.player.morale = Math.min(100, gameState.player.morale + 15);
            
            // –ó–∞—Ä–ø–ª–∞—Ç–∞
            gameState.player.savings += gameState.player.salary;
            
            // –°–∏–º—É–ª—è—Ü–∏—è –º–∞—Ç—á–∞
            simulateWeeklyMatch();
            
            showNotification(`üîÑ –ù–µ–¥–µ–ª—è ${gameState.week}! +30 —ç–Ω–µ—Ä–≥–∏–∏, +15 –º–æ—Ä–∞–ª–∏, +‚Ç¨${gameState.player.salary.toLocaleString()} –∑–∞—Ä–ø–ª–∞—Ç—ã`);
            updateUI();
        }

        // –°–∏–º—É–ª—è—Ü–∏—è –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–≥–æ –º–∞—Ç—á–∞
        function simulateWeeklyMatch() {
            if (gameState.player.injury) {
                showNotification('‚ùå –ü—Ä–æ–ø—É—Å–∫ –º–∞—Ç—á–∞ –∏–∑-–∑–∞ —Ç—Ä–∞–≤–º—ã');
                return;
            }
            
            // –ò–≥—Ä–æ–∫ –ø–æ–ª—É—á–∞–µ—Ç –æ–ø—ã—Ç –∑–∞ –º–∞—Ç—á
            gameState.player.form = Math.min(100, gameState.player.form + 5);
            gameState.player.morale = Math.min(100, gameState.player.morale + 8);
            
            showNotification('‚öΩ –°—ã–≥—Ä–∞–Ω –º–∞—Ç—á! +5 —Ñ–æ—Ä–º—ã, +8 –º–æ—Ä–∞–ª–∏');
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç—Ä–∞–≤–º—ã
        function generateInjury() {
            const injuryChance = gameState.player.injury_proneness / 200;
            if (Math.random() < injuryChance) {
                const severity = Math.random() < 0.7 ? 'light' : Math.random() < 0.9 ? 'medium' : 'severe';
                const injuries = INJURY_DATABASE[severity];
                return injuries[Math.floor(Math.random() * injuries.length)];
            }
            return null;
        }

        // –í—ã–ø–æ–ª–Ω–∏—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É
        function performTraining(type) {
            if (gameState.player.energy <= 0) {
                showNotification('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏ –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏');
                return;
            }

            if (gameState.player.injury) {
                showNotification('‚ùå –ù–µ–ª—å–∑—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å —Ç—Ä–∞–≤–º–æ–π');
                return;
            }

            let message = '';
            let energyCost = 0;
            let attributeGain = 0;

            switch(type) {
                case 'physical':
                    energyCost = 15;
                    attributeGain = Math.floor(Math.random() * 2) + 2;
                    gameState.player.physical = Math.min(99, gameState.player.physical + 1);
                    gameState.player.stamina = Math.min(99, gameState.player.stamina + attributeGain);
                    message = `üí™ –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ —Ñ–∏–∑. –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏: +${attributeGain} –∫ –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç–∏`;
                    break;
                case 'technical':
                    energyCost = 12;
                    attributeGain = Math.floor(Math.random() * 2) + 2;
                    gameState.player.technique = Math.min(99, gameState.player.technique + attributeGain);
                    message = `üîß –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ —Ç–µ—Ö–Ω–∏–∫–∏: +${attributeGain} –∫ —Ç–µ—Ö–Ω–∏–∫–µ`;
                    break;
                case 'tactical':
                    energyCost = 10;
                    attributeGain = Math.floor(Math.random() * 2) + 1;
                    gameState.player.mental = Math.min(99, gameState.player.mental + 1);
                    gameState.player.decision = Math.min(99, gameState.player.decision + attributeGain);
                    message = `üß† –¢–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞: +${attributeGain} –∫ —Ä–µ—à–µ–Ω–∏—é`;
                    break;
                case 'mental':
                    energyCost = 8;
                    const moraleGain = Math.floor(Math.random() * 4) + 2;
                    gameState.player.morale = Math.min(100, gameState.player.morale + moraleGain);
                    gameState.player.willpower = Math.min(99, gameState.player.willpower + 1);
                    message = `üòå –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞: +${moraleGain} –∫ –º–æ—Ä–∞–ª–∏`;
                    break;
            }

            // –¢—Ä–∞—Ç–∏–º —ç–Ω–µ—Ä–≥–∏—é
            gameState.player.energy = Math.max(0, gameState.player.energy - energyCost);
            message += `, -${energyCost} —ç–Ω–µ—Ä–≥–∏–∏`;

            // –†–∏—Å–∫ —Ç—Ä–∞–≤–º—ã
            const injury = generateInjury();
            if (injury) {
                gameState.player.injury = injury;
                message += `\n‚ö†Ô∏è –¢–†–ê–í–ú–ê! ${injury.name} - ${injury.days} –¥–Ω–µ–π`;
            }

            // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å
            advanceDay();

            showNotification(message);
            updateUI();
        }

        // –í—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ
        function performAction(action) {
            let message = '';

            switch(action) {
                case 'rest':
                    if (gameState.dailyRestUsed) {
                        showNotification('‚ùå –û—Ç–¥—ã—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ä–∞–∑ –≤ –¥–µ–Ω—å');
                        return;
                    }
                    
                    const energyGain = Math.floor(Math.random() * 11) + 20;
                    gameState.player.energy = Math.min(100, gameState.player.energy + energyGain);
                    gameState.player.morale = Math.min(100, gameState.player.morale + 5);
                    gameState.dailyRestUsed = true;
                    message = `üí§ –û—Ç–¥—ã—Ö: +${energyGain} —ç–Ω–µ—Ä–≥–∏–∏, +5 –º–æ—Ä–∞–ª–∏`;
                    break;
            }

            // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å
            advanceDay();

            showNotification(message);
            updateUI();
        }

        // –î–µ–π—Å—Ç–≤–∏–µ –≤ –∂–∏–∑–Ω–∏
        function performLifeAction(action) {
            let message = '';
            let energyCost = 0;

            switch(action) {
                case 'family':
                    energyCost = 5;
                    if (gameState.player.energy < energyCost) {
                        showNotification(`‚ùå –ù—É–∂–Ω–æ ${energyCost} —ç–Ω–µ—Ä–≥–∏–∏ –¥–ª—è —ç—Ç–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è`);
                        return;
                    }
                    const familyMorale = Math.floor(Math.random() * 6) + 5;
                    gameState.player.morale = Math.min(100, gameState.player.morale + familyMorale);
                    gameState.player.lifestyle = Math.min(100, gameState.player.lifestyle + 2);
                    message = `üë®‚Äçüë©‚Äçüëß‚Äçüë¶ –í—Ä–µ–º—è —Å —Å–µ–º—å—ë–π: +${familyMorale} –º–æ—Ä–∞–ª–∏, +2 –∫ –æ–±—Ä–∞–∑—É –∂–∏–∑–Ω–∏`;
                    break;

                case 'media':
                    energyCost = 8;
                    if (gameState.player.energy < energyCost) {
                        showNotification(`‚ùå –ù—É–∂–Ω–æ ${energyCost} —ç–Ω–µ—Ä–≥–∏–∏ –¥–ª—è —ç—Ç–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è`);
                        return;
                    }
                    const mediaRep = (Math.random() * 0.2 + 0.1).toFixed(1);
                    gameState.player.media_reputation = Math.min(5.0, gameState.player.media_reputation + parseFloat(mediaRep));
                    gameState.player.lifestyle = Math.min(100, gameState.player.lifestyle + 1);
                    message = `üì∫ –ò–Ω—Ç–µ—Ä–≤—å—é: +${mediaRep} —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ –°–ú–ò, +1 –∫ –æ–±—Ä–∞–∑—É –∂–∏–∑–Ω–∏`;
                    break;

                case 'social':
                    energyCost = 6;
                    if (gameState.player.energy < energyCost) {
                        showNotification(`‚ùå –ù—É–∂–Ω–æ ${energyCost} —ç–Ω–µ—Ä–≥–∏–∏ –¥–ª—è —ç—Ç–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è`);
                        return;
                    }
                    const socialRep = (Math.random() * 0.1 + 0.1).toFixed(1);
                    gameState.player.fan_reputation = Math.min(5.0, gameState.player.fan_reputation + parseFloat(socialRep));
                    gameState.player.lifestyle = Math.min(100, gameState.player.lifestyle + 3);
                    message = `üì± –°–æ—Ü—Å–µ—Ç–∏: +${socialRep} —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ —É –±–æ–ª–µ–ª—å—â–∏–∫–æ–≤, +3 –∫ –æ–±—Ä–∞–∑—É –∂–∏–∑–Ω–∏`;
                    break;

                case 'business':
                    energyCost = 12;
                    if (gameState.player.energy < energyCost) {
                        showNotification(`‚ùå –ù—É–∂–Ω–æ ${energyCost} —ç–Ω–µ—Ä–≥–∏–∏ –¥–ª—è —ç—Ç–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è`);
                        return;
                    }
                    const businessIncome = Math.floor(Math.random() * 10001) + 5000;
                    gameState.player.savings += businessIncome;
                    gameState.player.lifestyle = Math.min(100, gameState.player.lifestyle + 5);
                    message = `üíº –ë–∏–∑–Ω–µ—Å: +‚Ç¨${businessIncome.toLocaleString()} –¥–æ—Ö–æ–¥–∞, +5 –∫ –æ–±—Ä–∞–∑—É –∂–∏–∑–Ω–∏`;
                    break;

                case 'hobby':
                    energyCost = 4;
                    if (gameState.player.energy < energyCost) {
                        showNotification(`‚ùå –ù—É–∂–Ω–æ ${energyCost} —ç–Ω–µ—Ä–≥–∏–∏ –¥–ª—è —ç—Ç–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è`);
                        return;
                    }
                    const hobbyMorale = Math.floor(Math.random() * 6) + 3;
                    gameState.player.morale = Math.min(100, gameState.player.morale + hobbyMorale);
                    gameState.player.lifestyle = Math.min(100, gameState.player.lifestyle + 4);
                    message = `üé® –•–æ–±–±–∏: +${hobbyMorale} –º–æ—Ä–∞–ª–∏, +4 –∫ –æ–±—Ä–∞–∑—É –∂–∏–∑–Ω–∏`;
                    break;
            }

            // –¢—Ä–∞—Ç–∏–º —ç–Ω–µ—Ä–≥–∏—é
            gameState.player.energy = Math.max(0, gameState.player.energy - energyCost);
            message += `, -${energyCost} —ç–Ω–µ—Ä–≥–∏–∏`;

            // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å
            advanceDay();

            showNotification(message);
            updateUI();
        }

        // –î–µ–π—Å—Ç–≤–∏–µ –≤ –º–∞—Ç—á–µ
        function performMatchAction(action) {
            let energyCost = 0;
            
            switch(action) {
                case 'attack': energyCost = 3; break;
                case 'defend': energyCost = 2; break;
                case 'pass': energyCost = 2; break;
                case 'dribble': energyCost = 3; break;
                case 'shoot': energyCost = 4; break;
            }
            
            if (gameState.player.energy < energyCost) {
                showNotification(`‚ùå –ù—É–∂–Ω–æ ${energyCost} —ç–Ω–µ—Ä–≥–∏–∏ –¥–ª—è —ç—Ç–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è`);
                return;
            }
            
            gameState.player.energy -= energyCost;
            
            // –°–∏–º—É–ª—è—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏—è
            const minute = Math.floor(Math.random() * 90) + 1;
            const success = Math.random() > 0.4; // 60% —à–∞–Ω—Å —É—Å–ø–µ—Ö–∞
            
            let result = '';
            if (action === 'shoot' && success) {
                result = '‚öΩ –ì–û–û–û–õ!';
                gameState.player.morale += 10;
                gameState.player.form += 5;
            } else if (action === 'shoot' && !success) {
                result = '‚ùå –ú–∏–º–æ –≤–æ—Ä–æ—Ç';
                gameState.player.morale -= 2;
                gameState.player.form -= 1;
            } else if (success) {
                result = '‚úÖ –£—Å–ø–µ—à–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ';
                gameState.player.morale += 3;
                gameState.player.form += 2;
            } else {
                result = '‚ùå –ù–µ—É–¥–∞—á–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ';
                gameState.player.morale -= 1;
                gameState.player.form -= 1;
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–±—ã—Ç–∏–µ –≤ –ª–æ–≥ –º–∞—Ç—á–∞
            const matchEvent = {
                minute: minute,
                action: action,
                result: result,
                energy: -energyCost
            };
            
            gameState.player.matchEvents.unshift(matchEvent);
            updateMatchEvents();
            updateUI();
            
            showNotification(`${minute}': ${result} (-${energyCost} —ç–Ω–µ—Ä–≥–∏–∏)`);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –º–∞—Ç—á–∞
        function updateMatchEvents() {
            const eventsContainer = document.getElementById('matchEvents');
            eventsContainer.innerHTML = '';
            
            if (gameState.player.matchEvents.length === 0) {
                eventsContainer.innerHTML = '<div style="text-align: center; opacity: 0.7;">–°–æ–±—ã—Ç–∏—è –º–∞—Ç—á–∞ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å</div>';
                return;
            }
            
            gameState.player.matchEvents.slice(0, 5).forEach(event => {
                const eventElement = document.createElement('div');
                eventElement.style.padding = '8px';
                eventElement.style.borderBottom = '1px solid rgba(255,255,255,0.1)';
                eventElement.style.fontSize = '14px';
                eventElement.innerHTML = `
                    <div>${event.minute}': ${event.result}</div>
                    <div style="font-size: 12px; opacity: 0.7;">–≠–Ω–µ—Ä–≥–∏—è: ${event.energy}</div>
                `;
                eventsContainer.appendChild(eventElement);
            });
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–∞–≥–∞–∑–∏–Ω–∞
        function setupShop() {
            const shopContainer = document.getElementById('shopItems');
            shopContainer.innerHTML = '';
            
            SHOP_ITEMS.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'shop-item';
                itemElement.onclick = () => buyItem(item.id);
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Ö–≤–∞—Ç–∞–µ—Ç –ª–∏ –¥–µ–Ω–µ–≥
                const canAfford = gameState.player.savings >= item.price;
                if (!canAfford) {
                    itemElement.style.opacity = '0.5';
                    itemElement.style.cursor = 'not-allowed';
                }
                
                itemElement.innerHTML = `
                    <div class="shop-item-name">${item.name}</div>
                    <div class="shop-item-price">‚Ç¨${item.price.toLocaleString()}</div>
                    <div class="shop-item-effect">${item.effect}</div>
                `;
                shopContainer.appendChild(itemElement);
            });
            
            document.getElementById('shopBalance').textContent = gameState.player.savings.toLocaleString();
            document.getElementById('inventoryList').textContent = gameState.player.inventory.length > 0 ? gameState.player.inventory.join(', ') : '–ø—É—Å—Ç–æ';
        }

        // –ü–æ–∫—É–ø–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–∞
        function buyItem(itemId) {
            const item = SHOP_ITEMS.find(x => x.id === itemId);
            if (!item) return;
            
            if (gameState.player.savings < item.price) {
                showNotification('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥');
                return;
            }
            
            gameState.player.savings -= item.price;
            gameState.player.inventory.push(item.name);
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–µ–¥–º–µ—Ç–∞
            let effectMessage = `‚úÖ –ö—É–ø–ª–µ–Ω–æ: ${item.name}\n`;
            
            if (item.effect.includes('—ç–Ω–µ—Ä–≥–∏–∏')) {
                gameState.player.energy = Math.min(100, gameState.player.energy + 5);
                effectMessage += '+5 —ç–Ω–µ—Ä–≥–∏–∏\n';
            }
            if (item.effect.includes('–º–æ—Ä–∞–ª–∏')) {
                gameState.player.morale = Math.min(100, gameState.player.morale + 1);
                effectMessage += '+1 –º–æ—Ä–∞–ª–∏\n';
            }
            if (item.effect.includes('—Ñ–∏–∑–∏–∫–µ')) {
                gameState.player.physical = Math.min(99, gameState.player.physical + 3);
                effectMessage += '+3 –∫ —Ñ–∏–∑–∏–∫–µ\n';
            }
            if (item.effect.includes('–º–µ–Ω—Ç–∞–ª–∏—Ç–µ—Ç—É')) {
                gameState.player.mental = Math.min(99, gameState.player.mental + 5);
                effectMessage += '+5 –∫ –º–µ–Ω—Ç–∞–ª–∏—Ç–µ—Ç—É\n';
            }
            if (item.effect.includes('—Ç–µ—Ö–Ω–∏–∫–µ')) {
                gameState.player.technique = Math.min(99, gameState.player.technique + 2);
                effectMessage += '+2 –∫ —Ç–µ—Ö–Ω–∏–∫–µ\n';
            }
            if (item.effect.includes('–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é')) {
                gameState.player.recovery = Math.min(99, gameState.player.recovery + 10);
                effectMessage += '+10 –∫ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é\n';
            }
            
            effectMessage += `–ë–∞–ª–∞–Ω—Å: ‚Ç¨${gameState.player.savings.toLocaleString()}`;
            
            showNotification(effectMessage);
            setupShop();
            updateUI();
        }

        // –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –≤–Ω–µ—à–Ω–æ—Å—Ç–∏
        function selectAppearance(type, value) {
            gameState.player.appearance[type] = value;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä
            document.querySelectorAll('.customization-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            showNotification(`‚úÖ –í–Ω–µ—à–Ω–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∞: ${type} -> ${value}`);
        }

        // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å
        function advanceDay() {
            gameState.day++;
            
            // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Ç—Ä–∞–≤–º–µ
            if (gameState.player.injury) {
                gameState.player.injury.days--;
                if (gameState.player.injury.days <= 0) {
                    gameState.player.injury = null;
                    showNotification('‚úÖ –¢—Ä–∞–≤–º–∞ –≤—ã–ª–µ—á–µ–Ω–∞!');
                }
            }
            
            updateUI();
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Ç Telegram
        tg.onEvent('viewportChanged', () => {
            tg.expand();
        });

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ Telegram –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
        function sendDataToTelegram() {
            const data = {
                player: gameState.player.name,
                week: gameState.week,
                season: gameState.season
            };
            tg.sendData(JSON.stringify(data));
        }
    </script>
</body>
</html>
